#===============================================================================
# DESKTOP CONTROLS
#===============================================================================

# create new desktop
# cmd + alt - n : yabai -m space --create

# create new desktop and focus on it
# cmd + alt - n : yabai -m space --create && \
#                   index="$(yabai -m query --spaces --display | jq 'map(select(."native-fullscreen" == 0))[-1].index')" && \
#                   yabai -m space --focus "${index}"

# clear all empty desktops
ctrl + alt + cmd - d : source ~/Desktop/launch.sh && clearemptydesktops


# delete desktop and go to previous desktop
cmd + alt - w : index="$(yabai -m query --spaces --space | jq .index)" && \
                  prevind="$(($index-1))" && \
                  yabai -m space --destroy && \
                  yabai -m space --focus "${index}" || yabai -m space --focus "${prevind}"

# delete desktop
# cmd + alt - w : yabai -m space --destroy

# focus desktop directional
cmd + alt - left  : yabai -m space --focus prev || yabai -m space --focus last
cmd + alt - right : yabai -m space --focus next || yabai -m space --focus first
cmd + alt - h     : yabai -m space --focus prev || yabai -m space --focus last
cmd + alt - l     : yabai -m space --focus next || yabai -m space --focus first

# focus desktop by number
cmd + alt - 1  : yabai -m space --focus 1
cmd + alt - 2  : yabai -m space --focus 2
cmd + alt - 3  : yabai -m space --focus 3
cmd + alt - 4  : yabai -m space --focus 4
cmd + alt - 5  : yabai -m space --focus 5
cmd + alt - 6  : yabai -m space --focus 6
cmd + alt - 7  : yabai -m space --focus 7
cmd + alt - 8  : yabai -m space --focus 8
cmd + alt - 9  : yabai -m space --focus 9

# send desktop to display directional and follow focus
# - right: index="$(yabai -m query --displays --display | jq .index)" \
#            nextind="$(($index+1))"
#            (yabai -m space --display next && yabai -m display --focus ${nextind}) ||\
#            (yabai -m space --display first && yabai -m display --focus first)
# - left: index="$(yabai -m query --displays --display | jq .index)" \
#            prevind="$(($index-1))"
#            (yabai -m space --display prev && yabai -m display --focus ${prevind}) ||\
#            (yabai -m space --display last && yabai -m display --focus last)

# # send desktop to display directional and keep original focus
# - right: index="$(yabai -m query --displays --display | jq .index)" \
#            (yabai -m space --display next  && yabai -m display --focus ${index}) ||\
#            (yabai -m space --display first && yabai -m display --focus ${index})
# - left: index="$(yabai -m query --displays --display | jq .index)" \
#            (yabai -m space --display prev && yabai -m display --focus ${index}) ||\
#            (yabai -m space --display last && yabai -m display --focus ${index})

# # send desktop to display by number and focus
# - 1 : yabai -m space --display 1 && yabai -m display --focus 1
# - 2 : yabai -m space --display 2 && yabai -m display --focus 2
# - 3 : yabai -m space --display 3 && yabai -m display --focus 3

# # send desktop to display by number and keep original focus
# - 1 : index="$(yabai -m query --displays --display | jq .index)" \
#         yabai -m space --display 1 && yabai -m display --focus ${index}
# - 2 : index="$(yabai -m query --displays --display | jq .index)" \
#         yabai -m space --display 2 && yabai -m display --focus ${index}
# - 3 : index="$(yabai -m query --displays --display | jq .index)" \
#         yabai -m space --display 3 && yabai -m display --focus ${index}

#===============================================================================
# WINDOW CONTROLS
#===============================================================================

# focus window cardinally directional
# ctrl + alt - h     : yabai -m window --focus west
# ctrl + alt - j     : yabai -m window --focus north
# ctrl + alt - k     : yabai -m window --focus south
# ctrl + alt - l     : yabai -m window --focus east
# ctrl + alt - left  : yabai -m window --focus west
# ctrl + alt - up    : yabai -m window --focus north
# ctrl + alt - down  : yabai -m window --focus south
# ctrl + alt - right : yabai -m window --focus east

# focus window directional across all displays
alt - h : yabai -m window --focus prev ||\
  ((yabai -m display --focus prev || yabai -m display --focus last) && \
  yabai -m window --focus last)

alt - l : yabai -m window --focus next ||\
  ((yabai -m display --focus next || yabai -m display --focus first) && \
  yabai -m window --focus first)

# focus window directional across all desktops
# : yabai -m window --focus prev ||\
#   ((yabai -m space --focus prev || yabai -m space --focus last) && \
#   yabai -m window --focus last)
# : yabai -m window --focus next ||\
#   ((yabai -m space --focus next || yabai -m space --focus first) && \
#   yabai -m window --focus first)

# rotate left (ccw) and right (cw) by 90 degrees
alt - a : yabai -m space --rotate 90 # ; yabai -m space --balance
alt - d : yabai -m space --rotate 270
alt - s : yabai -m space --rotate 180

# flip horizontally, vertically
alt - q : yabai -m space --mirror x-axis
alt - e : yabai -m space --mirror y-axis # this is the same as 180 rotation

# toggle split
alt - x : yabai -m window --toggle split

# toggle fullscreen
alt - f : yabai -m window --toggle zoom-fullscreen

# create new desktop, move focused window to new dekstop, and focus as new desktop
alt - n : yabai -m space --create && \
            index="$(yabai -m query --spaces --display | jq 'map(select(."native-fullscreen" == 0))[-1].index')" && \
            yabai -m window --space "${index}" && \
            yabai -m space --focus "${index}"


# move window to display directional and follow focus
shift + alt - l : source ~/Desktop/launch.sh && windowdeltadisplay next follow
shift + alt - h : source ~/Desktop/launch.sh && windowdeltadisplay prev follow

# move window to display number and focus
shift + alt - 1 : source ~/Desktop/launch.sh && windowdeltadisplay_n 1 follow
shift + alt - 2 : source ~/Desktop/launch.sh && windowdeltadisplay_n 2 follow
shift + alt - 3 : source ~/Desktop/launch.sh && windowdeltadisplay_n 3 follow


# move window to display directional and keep original focus
# ctrl + alt - d : source ~/Desktop/launch.sh && windowdeltadisplay next
# ctrl + alt - d : source ~/Desktop/launch.sh && windowdeltadisplay prev

# move window to display number and keep original focus
# : source ~/Desktop/launch.sh && windowdeltadisplay_n 1
# : source ~/Desktop/launch.sh && windowdeltadisplay_n 2
# : source ~/Desktop/launch.sh && windowdeltadisplay_n 3



# : yabai -m window --display 1
# : yabai -m window --display 2
# : yabai -m window --display 3

# # move window to display number and focus
# : yabai -m window --display 1 && yabai -m display --focus 1
# : yabai -m window --display 2 && yabai -m display --focus 2
# : yabai -m window --display 3 && yabai -m display --focus 3

# # move window to desktop number
# : yabai -m window --desktop 1
# : yabai -m window --desktop 2
# : yabai -m window --desktop 3

# # move window to desktop number and focus
# : yabai -m window --desktop 1 && yabai -m desktop --focus 1
# : yabai -m window --desktop 2 && yabai -m desktop --focus 2
# : yabai -m window --desktop 3 && yabai -m desktop --focus 3

#===============================================================================
# DISPLAY CONTROLS
#===============================================================================

# focus display directional
shift + alt + cmd - left  : yabai -m display --focus prev || yabai -m display --focus last
shift + alt + cmd - right : yabai -m display --focus next || yabai -m display --focus first
shift + alt + cmd - h     : yabai -m display --focus prev || yabai -m display --focus last
shift + alt + cmd - l     : yabai -m display --focus next || yabai -m display --focus first

# focus display by number
shift + alt + cmd - 1 : yabai -m display --focus 1
shift + alt + cmd - 2 : yabai -m display --focus 2
shift + alt + cmd - 3 : yabai -m display --focus 3

# yabai -m window --toggle split && yabai -m space --balance




# focusing display issues







# create new desktop to the right and focus on it
shift + alt - p : index="$(yabai -m query --spaces --space | jq .index)" && \
                    nextind="$(($index+1))" && \
                    yabai -m space --create && \
                    newind="$(yabai -m query --spaces --display | jq 'map(select(."native-fullscreen" == 0))[-1].index')" && \
                    yabai -m space --focus "${newind}" && \
                    yabai -m space --move "${nextind}" && \
                    yabai -m space --focus "${nextind}"

# create new desktop to the left and focus on it
shift + alt - o : index="$(yabai -m query --spaces --space | jq .index)" && \
                    yabai -m space --create && \
                    newind="$(yabai -m query --spaces --display | jq 'map(select(."native-fullscreen" == 0))[-1].index')" && \
                    yabai -m space --focus "${newind}" && \
                    yabai -m space --move "${index}" && \
                    yabai -m space --focus "${index}"



# open terminal
cmd - return : source ~/Desktop/launch.sh && superkitty "zsh -i"

# flex
ctrl + alt - f : source ~/Desktop/launch.sh && showoff

# theres a healthy way to do this



# window management: new display and send to new display and focus
# display management: new display and focusk



# osascript tell terminal emulator to focus and cmd n


# kitty --single-instance -d ~ -o allow_remote_control=yes --listen-on unix:/tmp/mykitty




# move window to display







# pipes-sh
# tty-clock
# neofetch
# asciiquarium
# gotop
# glances

# gtop
# vtop
# htop















# open terminal and move to current focused window

# open terminal window and move to current focused window

# open terminal in new desktop on currently focused dispslay


# mission control:
# open neofetch window
# open











# shift + alt - o : yabai -m space --move 2


# warp (move but keep dimensions)

# swap (switch position and with another window)


# move window directional
# move window to different desktop
# move window to different desktop and focus desktop
# move window to different display
# move window to different desktop and focus display
# swap desktops
# swap displays
# move desktop
# move displays
# open terminal
# focus display with window for focused/opened app
# create desktop and move to it
# create move window to new desktop
# mouse follows focus

# change folder colors

# rules for setup of several windows

# create new desktop to the left of current desktop



# full screen

# minimize

# maximize





# # Balance out all windows both horizontally and vertically
# #   to occupy the same space
# yabai -m space --balance

# # Flip the tree horizontally
# yabai -m space --mirror x-axis

# # Flip the tree vertically
# yabai -m space --mirror y-axis

# # Rotate the window tree clock-wise (options: 90, 180, 270 degree)
# yabai -m space --rotate 90



# learn apple window management shortcuts
# learn vscode osx commands for moving lines and such


# ############################################################### #
# THE FOLLOWING SECTION CONTAIN SIMPLE MAPPINGS DEMONSTRATING HOW #
# TO INTERACT WITH THE YABAI WM. THESE ARE SUPPOSED TO BE USED AS #
# A REFERENCE ONLY, WHEN MAKING YOUR OWN CONFIGURATION..          #
# ############################################################### #

# swap managed window
# shift + alt - h : yabai -m window --swap north

# move managed window
# shift + cmd - h : yabai -m window --warp east

# balance size of windows
# shift + alt - 0 : yabai -m space --balance

# make floating window fill screen
# shift + alt - up     : yabai -m window --grid 1:1:0:0:1:1

# make floating window fill left-half of screen
# shift + alt - left   : yabai -m window --grid 1:2:0:0:1:1




# increase window size
shift + alt - a : yabai -m window --resize left:-20:0
shift + alt - w : yabai -m window --resize top:0:-20

# decrease window size
# shift + cmd - s : yabai -m window --resize bottom:0:-20
# shift + cmd - w : yabai -m window --resize top:0:20

# set insertion point in focused container
# ctrl + alt - h : yabai -m window --insert west



# toggle window split type
# alt - e : yabai -m window --toggle split

# float / unfloat window and center on screen
# alt - t : yabai -m window --toggle float;\
#           yabai -m window --grid 4:4:1:1:2:2

# toggle sticky(+float), topmost, border and picture-in-picture
# alt - p : yabai -m window --toggle sticky;\
#           yabai -m window --toggle topmost;\
#           yabai -m window --toggle border;\
#           yabai -m window --toggle pip





# fast restart yabai


# TODO:
#   close empty displays


#===============================================================================
# OTHER
#===============================================================================

# restart yabai
ctrl + alt + cmd - r : launchctl kickstart -k "gui/${UID}/homebrew.mxcl.yabai"
